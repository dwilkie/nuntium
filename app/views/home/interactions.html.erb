<%- if @applications.empty? and @channels.empty? -%>
  To interact with this account you must first create a new application or a new channel.
<%- else -%>
  <p>These are the ways you can interface with nuntium. This section is updated when you create and modify applications and channels.</p>

  <div style="padding-left:20px">
  <%- if @channels.any?{|c| c.kind == 'clickatell'} -%>
    <div><b>Via <%= link_to 'Clickatell', 'http://www.clickatell.com', :target => '_blank' -%></b></div>
    Use <%= link_to 'Http Basic Authentication', 'http://en.wikipedia.org/wiki/Basic_access_authentication', :target => '_blank' -%> with channel name and incoming password.
    <ul>
      <li><span class="url">GET <%= url_for :controller => :clickatell, :action => :index, :account_id => @account.name, :only_path => false -%></span>
        create Application Terminated Messages</li>
        <li><span class="url">GET <%= url_for :controller => :clickatell, :action => :index, :account_id => @account.id, :only_path => false -%></span
        create Application Terminated Messages</li>
    </ul>
  <%- end -%>

  <%- if @channels.any?{|c| c.kind == 'dtac'} -%>
    <div><b>Via <%= link_to 'DTAC', 'http://www.dtac.co.th/', :target => '_blank' -%></b></div>
    Use <%= link_to 'Http Basic Authentication', 'http://en.wikipedia.org/wiki/Basic_access_authentication', :target => '_blank' -%> with channel name and incoming password.
    <ul>
      <li><span class="url">GET <%= url_for :controller => :dtac, :action => :index, :account_id => @account.name, :only_path => false -%></span>
        create Application Terminated Messages</li>
        <li><span class="url">GET <%= url_for :controller => :dtac, :action => :index, :account_id => @account.id, :only_path => false -%></span>
        create Application Terminated Messages</li>
    </ul>
  <%- end -%>

  <%- if not @applications.empty? -%>
    <div><b>Via HTTP GET</b></div>
    Use <%= link_to 'Http Basic Authentication', 'http://en.wikipedia.org/wiki/Basic_access_authentication', :target => '_blank' -%> with application credentials (use "account/application" as username).

    <ul>
      <%- @applications.each do |app| -%>
        <li><span class="url">GET <%= url_for :controller => :send_ao, :action => :create, :account_name => @account.name, :application_name => app.name, :only_path => false -%></span>
          create Application Originated Messages from <%= app.name -%></li>
      <%- end -%>
    </ul>
  <%- end -%>

  <%- if @channels.any?{|c| c.kind == 'pop3'} -%>
    <div><b>Via Email</b></div>
    <ul>
      <%- @channels.select{|c| c.kind == 'pop3'}.each do |c| -%>
        <li>Send an email to <%= c.configuration[:user] -%>: create Application Terminated Messages</li>
      <%- end -%>
    </ul>
  <%- end -%>

  <%- if @channels.any?{|c| c.kind == 'qst_server'} -%>
    <div><b>Via <%= link_to 'QueueStateTransfer', 'http://code.google.com/p/geochat/wiki/QueueStateTransfer', :target => '_blank' -%></b></div>
    <ul>
      <li>Use <span class="url"><%= (url_for :controller => :outgoing, :action => :index, :account_id => @account.name, :only_path => false)[0 .. -10] %></span> when configuring a QST client using <%= link_to 'Http Basic Authentication', 'http://en.wikipedia.org/wiki/Basic_access_authentication', :target => '_blank' -%> with channel credentials</li>
    </ul>
  <%- end -%>

  <%- if not @applications.empty? -%>
    <div><b>Via <%= link_to 'RSS', 'http://en.wikipedia.org/wiki/RSS', :target => '_blank' -%></b></div>
    Use <%= link_to 'Http Basic Authentication', 'http://en.wikipedia.org/wiki/Basic_access_authentication', :target => '_blank' -%> with application credentials (use "account/application" as username).

    <ul>
      <%- @applications.each do |app| -%>
        <li><span class="url">POST <%= url_for :controller => :rss, :action => :create, :account_name => @account.name, :application_name => app.name, :only_path => false -%></span>
          create Application Originated Messages from <%= app.name -%></li>
          <li><span class="url">GET <%= url_for :controller => :rss, :action => :index, :account_name => @account.name, :application_name => app.name, :only_path => false -%></span>
          read Application Terminated Messages to <%= app.name -%></li>
      <%- end -%>
    </ul>
  <%- end -%>

  <%- if @channels.any?{|c| c.kind == 'twitter'} -%>
    <div><b>Via <%= link_to 'Twitter', 'http://www.twitter.com', :target => '_blank' -%></b></div>
    <ul>
      <%- @channels.select{|c| c.kind == 'twitter'}.each do |c| -%>
        <li>Send a direct message to <%= c.configuration[:screen_name] -%>: create Application Terminated Messages</li>
      <%- end -%>
    </ul>
  <%- end -%>
  </div>
<%- end -%>
